<link rel="stylesheet" href="{{ 'component-search.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-menu-drawer.css' | asset_url }}" media="print" onload="this.media='all'">
<link
  rel="stylesheet"
  href="{{ 'component-cart-notification.css' | asset_url }}"
  media="print"
  onload="this.media='all'"
>
<link rel="stylesheet" href="{{ 'component-cart-items.css' | asset_url }}" media="print" onload="this.media='all'">
{%- if settings.predictive_search_enabled -%}
  <link rel="stylesheet" href="{{ 'component-price.css' | asset_url }}" media="print" onload="this.media='all'">
  <link
    rel="stylesheet"
    href="{{ 'component-loading-overlay.css' | asset_url }}"
    media="print"
    onload="this.media='all'"
  >
{%- endif -%}
{%- if section.settings.menu_type_desktop == 'mega' -%}
  <link rel="stylesheet" href="{{ 'component-mega-menu.css' | asset_url }}" media="print" onload="this.media='all'">
  <noscript>{{ 'component-mega-menu.css' | asset_url | stylesheet_tag }}</noscript>
{%- endif -%}

{%- if settings.cart_type == 'drawer' -%}
  {{ 'component-cart-drawer.css' | asset_url | stylesheet_tag }}
  {{ 'component-cart.css' | asset_url | stylesheet_tag }}
  {{ 'component-totals.css' | asset_url | stylesheet_tag }}
  {{ 'component-price.css' | asset_url | stylesheet_tag }}
  {{ 'component-discounts.css' | asset_url | stylesheet_tag }}
  {{ 'component-loading-overlay.css' | asset_url | stylesheet_tag }}
{%- endif -%}

<script src="{{ 'details-disclosure.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'details-modal.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'cart-notification.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'search-form.js' | asset_url }}" defer="defer"></script>
{%- if settings.cart_type == 'drawer' -%}
  <script src="{{ 'cart-drawer.js' | asset_url }}" defer="defer"></script>
{%- endif -%}
{%- if section.settings.enable_country_selector or section.settings.enable_language_selector -%}
  <script src="{{ 'localization-form.js' | asset_url }}" defer="defer"></script>
{%- endif -%}

{% liquid
  assign monster_urls = "/pages/carmella-creeper /pages/franken-berry /pages/boo-berry /pages/count-chocula /pages/monster-mash" | split: ' '
%}

<nav
  class="z-10 relative h-[144px] md:h-[176px] bg-inherit 2xl:bg-contain bg-size-100 bg-fixed flex flex-col items-center lg:p-[48px] backdrop-blur-lg w-full leading-none antialiased"
  style="background: url({{ 'header-bg.jpg' | asset_url }})"
>
  {% for block in section.blocks %}
    {% case block.type %}
      {% when 'image_picker' %}
      {{
        block.settings.header_image
        | image_url: width: 230
        | image_tag: class: 'md:max-w-240 hover:scale-125'
        | link_to: block.settings.header_image__link,
        class: 'w-[144px] md:w-[160px]  top-[20%] md:top-[12px] absolute flex justify-center'
      }}
      {% when 'link_list' %}
      <!-- Mobile menu -->
      <div class="block md:hidden w-full">
        <img src="{{ 'hamburger.png' | asset_url }}"
          alt="Menu"
          class="hamburger fixed top-8 right-8"
          width="40"
          height="40" 
          role="button"
          loading="eager">
          <div class="hidden mobile-menu bg-gradient-to-b from-purple to-black flex flex-col min-h-screen">
            <ul class="flex flex-col gap-10 mt-32 mx-auto text-4xl" role="list">
              {% for link in block.settings.menu.links %}
                <li class="uppercase font-coop text-white" role="listitem">
                  {% for product in collections.all.products %}
                    {% if product.handle == link.handle %}
                        {{ product.title | link_to: product.url }}
                    {% endif %}
                  {% endfor %}
                </li>
              {% endfor %}
            </ul>
          </div>
      </div>
      <!-- Desktop menu -->
      <ul class="hidden md:flex absolute bottom-0 translate-y-1/2 items-center gap-[12px] sm:gap-[48px]" role="list">
        {% for link in block.settings.menu.links %}
          <li class="uppercase" role="listitem">
            {% for product in collections.all.products %}
              {% if product.handle == link.handle %}
                {% if product.handle == 'carmella-creeper' %}
                  {{
                    product.metafields.custom.logo_2
                    | image_url: width: 140
                    | image_tag: class: 'hover:scale-125 max-w-[80px] md:max-w-[140px] pb-[20px]'
                    | link_to: product.url
                  }}
                {% else %}
                  {{
                    product.metafields.custom.logo
                    | image_url: width: 140
                    | image_tag: class: 'hover:scale-125 max-w-[80px] md:max-w-[140px]'
                    | link_to: product.url
                  }}
                {% endif %}
              {% endif %}
            {% endfor %}
          </li>
        {% endfor %}
      </ul>
    {% endcase %}
  {% endfor %}
</nav>

<script type="text/javascript" async>
  const hamburger = document.querySelector('.hamburger');
  hamburger.addEventListener('click', () => {
    document.querySelector('.mobile-menu').classList.toggle('hidden');
  });
</script>

{% schema %}
{
  "name": "Header",
  "tag": "header",
  "blocks": [
    {
      "type": "link_list",
      "name": "Footer menu",
      "settings": [
        {
          "id": "menu",
          "type": "link_list",
          "label": "Footer link"
        }
      ]
    },
    {
      "type": "image_picker",
      "name": "Header Image",
      "settings": [
        {
          "id": "header_image",
          "type": "image_picker",
          "label": "Image",
          "info": "Select an image for the header"
        },
        {
          "id": "header_image__link",
          "type": "url",
          "label": "Image link",
          "info": "Link for header image: (default home)",
          "default": "/"
        }
      ]
    }
  ]
}
{% endschema %}
